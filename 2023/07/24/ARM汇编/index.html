<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"xinransix.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"width":280},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"waline","storage":true,"lazyload":false,"nav":{"waline":{"order":-2},"gitalk":{"order":-1}},"activeClass":"waline"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="ARM 汇编入门笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="ARM 汇编">
<meta property="og:url" content="https://xinransix.github.io/2023/07/24/ARM%E6%B1%87%E7%BC%96/index.html">
<meta property="og:site_name" content="木漏れ日">
<meta property="og:description" content="ARM 汇编入门笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xinransix.github.io/image/illustrations/0ba8b357a0694ce59173d2d7dcd455b3.jpg">
<meta property="article:published_time" content="2023-07-24T09:52:28.000Z">
<meta property="article:modified_time" content="2024-02-23T10:21:42.751Z">
<meta property="article:author" content="Yao J">
<meta property="article:tag" content="ARM">
<meta property="article:tag" content="汇编">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xinransix.github.io/image/illustrations/0ba8b357a0694ce59173d2d7dcd455b3.jpg">


<link rel="canonical" href="https://xinransix.github.io/2023/07/24/ARM%E6%B1%87%E7%BC%96/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://xinransix.github.io/2023/07/24/ARM%E6%B1%87%E7%BC%96/","path":"2023/07/24/ARM汇编/","title":"ARM 汇编"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ARM 汇编 | 木漏れ日</title>
  







<link rel="dns-prefetch" href="https://comment-for-blog-psi.vercel.app/">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="木漏れ日" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">木漏れ日</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">49</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">9</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">32</span></a></li><li class="menu-item menu-item-友人帐"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友人帐</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="nav-number">1.</span> <span class="nav-text">前置知识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arm-%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4"><span class="nav-number">2.</span> <span class="nav-text">ARM 汇编指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%AE%BF%E9%97%AE%E6%8C%87%E4%BB%A4"><span class="nav-number">2.1.</span> <span class="nav-text">存储访问指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">数据传送指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E6%8C%87%E4%BB%A4"><span class="nav-number">2.3.</span> <span class="nav-text">算术逻辑运算指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0operand2-%E8%AF%A6%E8%A7%A3"><span class="nav-number">2.4.</span> <span class="nav-text">操作数：operand2 详解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E6%8C%87%E4%BB%A4"><span class="nav-number">2.5.</span> <span class="nav-text">比较指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4"><span class="nav-number">2.6.</span> <span class="nav-text">条件执行指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%B3%E8%BD%AC%E6%8C%87%E4%BB%A4"><span class="nav-number">2.7.</span> <span class="nav-text">跳转指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#b-label"><span class="nav-number">2.7.1.</span> <span class="nav-text">B label</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bl-label"><span class="nav-number">2.7.2.</span> <span class="nav-text">BL label</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bx-rm"><span class="nav-number">2.7.3.</span> <span class="nav-text">BX Rm</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arm-%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">ARM 寻址方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%AF%BB%E5%9D%80"><span class="nav-number">3.1.</span> <span class="nav-text">寄存器寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%8B%E5%8D%B3%E6%95%B0%E5%AF%BB%E5%9D%80"><span class="nav-number">3.2.</span> <span class="nav-text">立即数寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E5%81%8F%E7%A7%BB%E5%AF%BB%E5%9D%80"><span class="nav-number">3.3.</span> <span class="nav-text">寄存器偏移寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E9%97%B4%E6%8E%A5%E5%AF%BB%E5%9D%80"><span class="nav-number">3.4.</span> <span class="nav-text">寄存器间接寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E5%9D%80%E5%AF%BB%E5%9D%80"><span class="nav-number">3.5.</span> <span class="nav-text">基址寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%84%E5%AD%98%E5%99%A8%E5%AF%BB%E5%9D%80"><span class="nav-number">3.6.</span> <span class="nav-text">多寄存器寻址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%AF%B9%E5%AF%BB%E5%9D%80"><span class="nav-number">3.7.</span> <span class="nav-text">相对寻址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arm-%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="nav-number">4.</span> <span class="nav-text">ARM 伪指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ldr-%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="nav-number">4.1.</span> <span class="nav-text">LDR 伪指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#adr-%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="nav-number">4.2.</span> <span class="nav-text">ADR 伪指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arm-%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="nav-number">5.</span> <span class="nav-text">ARM 汇编程序设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#arm-%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F%E6%A0%BC%E5%BC%8F"><span class="nav-number">5.1.</span> <span class="nav-text">ARM 汇编程序格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%A6%E5%8F%B7%E4%B8%8E%E6%A0%87%E5%8F%B7"><span class="nav-number">5.2.</span> <span class="nav-text">符号与标号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%AA%E6%93%8D%E4%BD%9C"><span class="nav-number">5.3.</span> <span class="nav-text">伪操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#c-%E8%AF%AD%E8%A8%80%E5%92%8C%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E6%B7%B7%E5%90%88%E7%BC%96%E7%A8%8B"><span class="nav-number">6.</span> <span class="nav-text">C 语言和汇编语言混合编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#atpcs-%E8%A7%84%E5%88%99"><span class="nav-number">6.1.</span> <span class="nav-text">ATPCS 规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-c-%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%86%85%E5%B5%8C%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81"><span class="nav-number">6.2.</span> <span class="nav-text">在 C 程序中内嵌汇编代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F%E4%B8%AD%E8%B0%83%E7%94%A8-c-%E7%A8%8B%E5%BA%8F"><span class="nav-number">6.3.</span> <span class="nav-text">在汇编程序中调用 C 程序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gnu-arm-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80"><span class="nav-number">7.</span> <span class="nav-text">GNU ARM 汇编语言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gnu-arm-%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E4%BC%AA%E6%93%8D%E4%BD%9C"><span class="nav-number">7.1.</span> <span class="nav-text">GNU ARM 编译器的伪操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gnu-arm-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E6%A0%87%E5%8F%B7"><span class="nav-number">7.2.</span> <span class="nav-text">GNU ARM 汇编语言中的标号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#section-%E4%BC%AA%E6%93%8D%E4%BD%9C"><span class="nav-number">7.3.</span> <span class="nav-text">section 伪操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="nav-number">7.4.</span> <span class="nav-text">基本数据格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89"><span class="nav-number">7.5.</span> <span class="nav-text">数据定义</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yao J"
      src="https://avatars.githubusercontent.com/u/62458905?v=4">
  <p class="site-author-name" itemprop="name">Yao J</p>
  <div class="site-description" itemprop="description">图形渣</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/XinranSix" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;XinranSix" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/2937552332@qq.com" title="E-Mail → 2937552332@qq.com" rel="noopener me"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://shyarcher.github.io/" title="https:&#x2F;&#x2F;shyarcher.github.io&#x2F;" rel="noopener" target="_blank">ShyArcher</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://noahapps.github.io/" title="https:&#x2F;&#x2F;noahapps.github.io&#x2F;" rel="noopener" target="_blank">Noah</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xinransix.github.io/2023/07/24/ARM%E6%B1%87%E7%BC%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/62458905?v=4">
      <meta itemprop="name" content="Yao J">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="木漏れ日">
      <meta itemprop="description" content="图形渣">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ARM 汇编 | 木漏れ日">
      <meta itemprop="description" content="ARM 汇编入门笔记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ARM 汇编
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-07-24 17:52:28" itemprop="dateCreated datePublished" datetime="2023-07-24T17:52:28+08:00">2023-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-02-23 18:21:42" itemprop="dateModified" datetime="2024-02-23T18:21:42+08:00">2024-02-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B1%87%E7%BC%96/" itemprop="url" rel="index"><span itemprop="name">汇编</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2023/07/24/ARM%E6%B1%87%E7%BC%96/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2023/07/24/ARM%E6%B1%87%E7%BC%96/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-item" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="waline-pageview-count" data-path="/2023/07/24/ARM%E6%B1%87%E7%BC%96/"></span>
    </span>
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>34 分钟</span>
    </span>
</div>

            <div class="post-description">ARM 汇编入门笔记</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="前置知识">前置知识</h2>
<p>计算机的指令集一般可分为 4 种：</p>
<ul>
<li>复杂指令集（CISC）</li>
<li>精简指令集 （ RISC）</li>
<li>显式并行指令集 （ EPIC ）</li>
<li>超长指令字指令集（VLIW）</li>
</ul>
<p>我们在嵌入式学习和工作中需要经常打交道的是 RISC 指令集。RISC
指令集相对于 CISC 指令集，主要有以下特点：</p>
<ul>
<li>Load / Store架构，CPU 不能直接处理内存中的数据，要先将内存中的数据
Load（加载）到寄存器中才能操作，然后将处理结果
Store（存储）到内存中。</li>
<li>固定的指令长度、单周期指令。</li>
<li>倾向于使用更多的寄存器来存储数据，而不是使用内存中的堆栈，效率更高。</li>
</ul>
<p>ARM 指令集虽然属于 RISC，但是和原汁原味的 RISC 相比，还是有一
些差异的，具体如下：</p>
<ul>
<li>ARM 有桶型移位寄存器，单周期内可以完成数据的各种移位操作。</li>
<li><strong>并不是所有的 ARM 指令都是单周期的。</strong></li>
<li>ARM 有 16 位的 Thumb 指令集，是 32 位 ARM
指令集的压缩形式，提高了代码密度。</li>
<li>条件执行：通过指令组合，减少了分支指令数目，提高了代码密度。</li>
<li>增加了 DSP、SIMD / NEON 等指令。</li>
</ul>
<p>ARM 处理器有多种工作模式，如下图所示。应用程序正常运行时，ARM
处理器工作在用户模式（User mode），当程序运行出错或有中断发生时，ARM
处理器就会切换到对应的特权工作模式。用户模式属于普通模式，有些特权指令是运行不了的，需要切换到特权模式下才能运行。在
ARM
处理器中，除了用户模式是普通模式，剩下的几种工作模式都属于特权模式。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/7059623d-ec4c-473f-b6dd-cc592303c1b7"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在 ARM
处理器内部，除了基本的算术运算单元、逻辑运算单元、浮点运算单元和控制单元，还有一系列寄存器，包括各种通用寄存器、状态寄存器、控制寄存器，用来控制处理器的运行，保存程序运行时的各种状态和临时结果，如下图所示：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/2fbec729-8e2e-477d-9f8b-a5bb2804262f"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>ARM 处理器中的寄存器可分为通用寄存器和专用寄存器两种。寄存器 R0～R12
属于通用寄存器，除了 FIQ
工作模式，在其他工作模式下这些寄存器都是共用、共享的：R0～R3
通常用来传递函数参数，R4～R11
用来保存程序运算的中间结果或函数的局部变量等，R12
常用来作为函数调用过程中的临时寄存器。ARM
处理器有多种工作模式，除了这些在各个模式下通用的寄存器，还有一些寄存器在各自的工作模式下是独立存在的，如
R13、R14、R15、CPSP、SPSR
寄存器，在每个工作模式下都有自己单独的寄存器。R13
寄存器又称为堆栈指针寄存器（Stack
Pointer，SP），用来维护和管理函数调用过程中的栈帧变化，R13
总是指向当前正在运行的函数的栈帧，一般不能再用作其他用途。R14
寄存器又称为链接寄存器（Link
Register，LR），在函数调用过程中主要用来保存上一级函数调用者的返回地址。寄存器
R15 又称为程序计数器（Program Counter，PC），CPU
从内存取指令执行，就是默认从 PC 保存的地址中取的，每取一次指令，PC
寄存器的地址值自动增加。CPU
一条一条不停地取指令，程序也就源源不断地一直运行下去。在 ARM
三级流水线中，PC 指针的值等于当前正在运行的指令地 +8，后续的 32
位处理器虽然流水线的级数不断增加，但为了简化编程，PC
指针的值继续延续了这种计算方式。</p>
<p>当前处理器状态寄存器（Current Processor State
Register，CPSR）主要用来表征当前处理器的运行状态。除了各种状态位、标志位，CPSR
寄存器里也有一些控制位，用来切换处理器的工作模式和中断使能控制。CPSR
寄存器各个标志位、控制位的详细说明下图所示：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/0e3f3e48-8ce0-46aa-9d89-f212df6b883b"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在每种工作模式下，都有一个单独的程序状态保存寄存器（Saved Processor
State Register，SPSR）。当 ARM 处理器切换工作模式或发生异常时，SPSR
用来保存当前工作模式下的处理器现场，即将 CPSR
寄存器的值保存到当前工作模式下的 SPSR 寄存器。当 ARM
处理器从异常返回时，就可以从 SPSR
寄存器中恢复原先的处理器状态，切换到原来的工作模式继续运行。</p>
<p>在 ARM 所有的工作模式中，有一种工作模式比较特殊，即 FIQ
模式。为了快速响应中断，减少中断现场保护带来的时间开销，在 FIQ
工作模式下，ARM处理器有自己独享的 R8～R12 寄存器。</p>
<h2 id="arm-汇编指令">ARM 汇编指令</h2>
<p>一个完整的 ARM 指令通常由<strong>操作码 +
操作数</strong>组成，指令的编码格式如下：</p>
<figure class="highlight arm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;opcode&gt; &#123;&lt;<span class="meta">code</span>&gt; &#123;S&#125; &lt;Rd&gt;, &lt;Rn&gt; &#123;, &lt;operand2&gt;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>这是一个完整的 ARM
指令需要遵循的格式规则，指令格式的具体说明如下：</p>
<ul>
<li>使用 <code>&lt;&gt;</code> 标起来的是必选项，使用 <code>&#123;&#125;</code>
标起来的是可选项。</li>
<li><code>&lt;opcode&gt;</code> 是二进制机器指令的操作码助记符，如
<code>MOV</code>、<code>ADD</code>
这些汇编指令都是操作码的指令助记符。</li>
<li><code>cond</code>：执行条件，ARM 为减少分支跳转指令个数，允许类似
<code>BEQ</code>、<code>BNE</code> 等形式的组合指令。</li>
<li><code>S</code>：是否影响 CPSR 寄存器中的标志位，如 SUBS 指令会影响
CPSR 寄存器中的 N、Z、C、V 标志位，而 SUB 指令不会。</li>
<li><code>Rd</code>：目标寄存器。</li>
<li><code>Rn</code>：第一个操作数的寄存器。</li>
<li><code>operand2</code>：第二个可选操作数，灵活使用第二个操作数可以提高代码效率。</li>
</ul>
<h3 id="存储访问指令">存储访问指令</h3>
<p>ARM 指令集属于 RISC 指令集，RISC
处理器采用典型的加载/存储体系结构，CPU
无法对内存里的数据直接操作，只能通 Load / Store
指令来实现：当我们需要对内存中的数据进行操作时，要首先将这个数据从内存加载到寄存器，然后在寄存器中对数据进行处理，最后将结果重新存储到内存中。</p>
<p>ARM
处理器属于冯·诺依曼架构，程序和数据都存储在同一存储器上，内存空间和 I/O
空间统一编址，ARM 处理器对程序指令、数据、I/O
空间中外设寄存器的访问都要通过 Load/Store 指令来完成。ARM
处理器中经常使用的 Load/Store 指令的使用方法如下。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/2ff6eaef-147d-4815-b1e5-51014f28cfe5"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在 ARM 存储访问指令中，我们经常使用的是 LDR/STR、LDM/STM
这两对指令。LDR/STR 指令是 ARM
汇编程序中使用频率最高的一对指令，每一次数据的处理基本上都离不开它们。LDM/STM
指令常用来加载或存储一组寄存器到一片连续的内存，通过和堆栈格式符组合使用，LDM/STM
指令还可以用来模拟堆栈操作。LDM/STM 指令常和下表的堆栈格式组合使用：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/4a6e20a4-2630-4466-9765-6d8660b4d6c3"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>如图3-3所示，在一个堆栈内存结构中，如果堆栈指针 SP
总是指向栈顶元素，那么这个栈就是满栈；如果堆栈指针 SP
指向的是栈顶元素的下一个空闲的存储单元，那么这个栈就是空栈。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/24b7757d-999b-4056-938e-8333a9a4816d"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>每入栈一个元素，栈指针 SP
都会往栈增长的方向移动一个存储单元。如果栈指针 SP
从高地址往低地址移动，那么这个栈就是递减栈；如果栈指针 SP
从低地址往高地址移动，那么这个栈就是递增栈。ARM
处理器使用的一般都是满递减堆栈，在将一组寄存器入栈，或者从栈中弹出一组寄存器时，我们可以使用下面的指令。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/f8a0c6d1-ad66-466f-86e1-9b6b63046408"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>这里需要注意的一个细节是，在入栈和出栈过程中要留意栈中各个元素的入栈出栈顺序。栈的特点是先入后出（First
In Last Out，FILO），栈元素在入栈操作时，STMFD 会根据大括号
<code>&#123;&#125;</code>
中寄存器列表中各个寄存器的顺序，从左往右依次压入堆栈。在上面的例子中，R0
会先入栈，接着 R1、R2 入栈，最后 R14 入栈，入栈操作完成后，栈指针 SP
在内存中的位置如图 3-4
左侧所示。栈元素在出栈操作时，顺序刚好相反，栈中的元素先弹出到 R14
寄存器中，接着是 R2、R1、R0。将栈中的元素依次弹出到 R14、R2
寄存器后，堆栈指针在内存中的位置如图3-4右侧所示。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/4f3d58b9-a7d2-43a9-b930-12d616bd6e69"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>除此之外，ARM 还专门提供了 PUSH 和 POP
指令来执行栈元素的入栈和出栈操作。PUSH 和 POP 指令的使用方法如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/44cfc5d7-eb03-41a3-8721-a95305014d7f"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="数据传送指令">数据传送指令</h3>
<p>LDR/STR
指令用来在寄存器和内存之间输送数据。如果我们想要在寄存器之间传送数据，则可以使用
MOV 指令。MOV 指令的格式如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/14355230-5433-48e6-927e-deab72902f19"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>其中，<code>&#123;cond&#125;</code> 为条件指令可选项，<code>&#123;S&#125;</code>
用来表示是否影响 CPSR 寄存器的值，如 MOVS 指令就会影响寄存器 CPSR
的值，而 MOV 则不会。</p>
<p>MVN 指令用来将操作数 operand2 按位取反后传送到目标寄存器 Rd。操作数
operand2 可以是一个立即数，也可以是一个寄存器。</p>
<p>MOV 和 MVN 指令的一般使用方法如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/6f681bd5-7e86-4a23-842f-c4e142b2b6af"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="算术逻辑运算指令">算术逻辑运算指令</h3>
<p>算术运算指令包括基本的加、减、乘、除，逻辑运算指令包括与、或、非、异或、清除等。指令格式如下。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/79a6eaa2-57c2-491b-ba21-f9490fdd0038"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>算术逻辑运算指令的基本使用方法及说明如下。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/e023cb2e-fa28-44a2-9bbd-9c67e3285d0b"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="操作数operand2-详解">操作数：operand2 详解</h3>
<p>ARM 指令的可选项很多，操作数也很灵活。很多 ARM 指令会使用第 2 个参数
operand2：可以是一个常数，也可以是寄存器+偏移的形式。</p>
<p>操作数 operand2 在汇编程序中经常出现的两种格式如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/670567f6-0f40-4adf-85f8-388b78e29cc9"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>第一种格式比较简单，操作数是一个立即数，第二种格式可以直接使用寄存器的值作为操作数。</p>
<p><code>ADD</code>、<code>SUB</code>、<code>AND</code>
指令示例中，第二个操作数要么是一个常数，要么是一个寄存器。在第二种格式中，通过
<code>&#123;，shift&#125;</code>
可选项，我们还可以通过多种移位或循环移位的方式，构建更加灵活的操作数。可选项
<code>&#123;，shift&#125;</code> 可以选择的移位方式如下。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/9ed294d1-cd66-46da-9be7-09329c8228e0"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>可选性指令的使用示例及说明如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/e01e4b37-f585-4cff-aa7e-1aae71d5ebf0"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="比较指令">比较指令</h3>
<p>比较指令用来比较两个数的大小，或比较两个数是否相等。比较指令的运算结果会影响
CPSR 寄存器的 N、Z、C、V 标志位，具体的标志、位说明可参考前面的 CPSR
寄存器介绍。</p>
<p>比较指令的格式如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/d1a40e26-faa9-441c-a003-6a5d35cf36e6"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>比较指令的使用示例及说明如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/33bee05a-a3d9-4a07-afd5-2e1f2756a303"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>比较指令的运行结果 Z=1 时，表示运算结果为零，两个数相等；N=1
表示运算结果为负，N=0 表示运算结果为非负，即运算结果为正或者为零。</p>
<h3 id="条件执行指令">条件执行指令</h3>
<p>为了提高代码密度，减少 ARM 指令的数量，几乎所有的 ARM 指令都可以根据
CPSR 寄存器中的标志位，通过指令组合实现条件执行。如无条件跳转指令
B，我们可以在后面加上条件码组成 BEQ、BNE 组合指令。</p>
<p>BEQ 指令表示两个数比较，结果相等时跳转；BNE
指令则表示结果不相等时跳转。CPSR
寄存器中的标志位根据需要可以任意搭配成不同的条件码，和 ARM
指令一起组合使用。</p>
<p>ARM 指令的条件码如表3-3所示：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/08284c0f-d520-44bc-9aa3-02dfa66f44c8"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>条件执行经常出现在跳转或循环的程序结构中。如下面的汇编程
序，通过循环结构，我们可以实现数据块的搬运功能。我们可以将无条件跳转指令
B 和条件码 NE 组合在一起使用，构成一个循环程序结构。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/f2266b5e-6b35-435a-ad37-7fa42974b0c4"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="跳转指令">跳转指令</h3>
<p>在函数调用的场合，以及循环结构、分支结构的程序中经常会用
到跳转指令。ARM 指令集提供了
<code>B</code>、<code>BL</code>、<code>BX</code>、`BLX``
等跳转指令，每个指令都有各自的用武之地和使用场景。</p>
<p>跳转指令的格式如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/3962c140-0876-473d-a460-87be2dc695a6"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h4 id="b-label">B label</h4>
<p>跳转到标号 label 处，B
跳转指令的跳转范围大小为[0，32MB]，可以往前跳，也可以往后跳。无条件跳转指令
B 主要用在循环、分支结构的汇编程序中，使用示例如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/c4a44fc3-65d4-4900-b669-f30e6d35a612"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h4 id="bl-label">BL label</h4>
<p>BL 跳转指令表示带链接的跳转。</p>
<p>在跳转之前，BL 指令会先将当前指令的下一条指令地址（即返回地址）保存到
LR 寄存器中，然后跳转到 label 处执行。</p>
<p>BL
指令一般用在函数调用的场合，主函数在跳转到子函数执行之前，会先将返回地址，即当前跳转指令的下一条指令地址保存到
LR 寄存器中；子函数执行结束后，LR 寄存器中的地址被赋值给
PC，处理器就可以返回到原来的主函数中继续运行了。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/32056188-99a5-4044-aa38-df9a7d06a043"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h4 id="bx-rm">BX Rm</h4>
<p>BX 表示带状态切换的跳转。</p>
<p>Rm 寄存器中保存的是跳转地址，要跳转的目标地址处可能是 ARM
指令，也可能是 Thumb 指令。处理器根据 Rm[0] 位决定是切换到 ARM
状态还是切换到 Thumb 状态。</p>
<ul>
<li>0：表示目标地址处是 ARM 指令，在跳转之前要先切换至 ARM 状态。</li>
<li>1：表示目标地址处是 Thumb 指令，在跳转之前要先切换至 Thumb 状态。BLX
指令是 BL 指令和 BX
指令的综合，表示带链接和状态切换的跳转，使用方法和上面相同，不再赘述。</li>
</ul>
<h2 id="arm-寻址方式">ARM 寻址方式</h2>
<p>ARM 属于 RISC 体系架构，一个 ARM
汇编程序中的大部分汇编指令，基本上都和数据传输有关：在内存-寄存器、内存-内存、寄存器-寄存器之间来回传输数据。不同的
ARM
指令又有不同的寻址方式，比较常见的寻址方式有寄存器寻址、立即寻址、寄存器偏移寻址、寄存器间接寻址、基址寻址、多寄存器寻址、相对寻址等。</p>
<h3 id="寄存器寻址">寄存器寻址</h3>
<p>寄存器寻址比较简单，操作数保存在寄存器中，通过寄存器名就可以直接对寄存器中的数据进行读写。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/eb0bf15a-0c26-41bf-a569-73a632ea5a66"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="立即数寻址">立即数寻址</h3>
<p>在立即数寻址中，ARM 指令中的操作数为一个常数。立即数以 ＃ 为前缀，0x
前缀表示该立即数为十六进制，不加前缀默认是十进制。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/84c6864e-7512-4e11-8ab4-aaa9f408dac5"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="寄存器偏移寻址">寄存器偏移寻址</h3>
<p>寄存器偏移寻址可以看作寄存器寻址的一种特例，通过第二个操作数 operand2
的灵活配置，我们可以将第二个操作数做各种左移和右移操作，作为新的操作数使用。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/6d9f7d6d-7229-4461-a85a-448cfe7471c0"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>常见的移位操作有逻辑移位和算术移位，两者的区别是：逻辑移位无论是左移还是右移，空缺位一律补
0；而算术移位则不同，左移时空缺位补 0，右移时空缺位使用符号位填充。</p>
<h3 id="寄存器间接寻址">寄存器间接寻址</h3>
<p>寄存器间接寻址主要用来在内存和寄存器之间传输数据。寄存器中保存的是数据在内存中的存储地址，我们通过这个地址就可以在寄存器和内存之间传输数据。C
语言中的指针操作，在汇编层次其实就是使用寄存器间接寻址实现的。寄存器间接寻址的使用示例及说明如下所示。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/06d0cfd1-8274-4523-9777-b2772ae8ccf9"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="基址寻址">基址寻址</h3>
<p>基址寻址其实也属于寄存器间接寻址。两者的不同之处在于，基址寻址将寄存器中的地址与一个偏移量相加，生成一个新地址，然后基于这个新地址去访问内存。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/d107f147-5f08-46fd-aacc-2f6d1f2bde0c"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>基址寻址一般用在查表、数组访问、函数的栈帧管理等场合。根据偏移量的正负，基址寻址又可以分为向前索引寻址和向后索引寻址，如上面的第
1 条和第 3 条指令，就是向后索引寻址，而第6条指令则为向前索引寻址。</p>
<h3 id="多寄存器寻址">多寄存器寻址</h3>
<p>STM/LDM 指令就属于多寄存器寻址，一次可以传输多个寄存器的值。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/5d43bfe1-a2e3-4017-bbc2-65b23e668453"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在多寄存器寻址中，用大括号 <code>&#123;&#125;</code>
括起来的是寄存器列表，寄存器之间用逗号隔开，如果是连续的寄存器，还可以使用连接符-连接，如
R0-R3，就表示 R0、R1、R2、R3 这 4 个寄存器。</p>
<p>LDM/STM 指令一般和 IA、IB、DA、DB 组合使用，分别表示 Increase
After、Increase Before、Decrease After、Decrease Before。</p>
<p>LDM/STM 指令也可以和 FD、ED、FA、EA 组合使用，用于堆栈操作。</p>
<p>栈是程序运行过程中非常重要的一段内存空间，栈是 C
语言运行的基础，函数内的局部变量、函数调用过程中要传递的参数、函数的返回值一般都是保存在栈中的。</p>
<p>ARM 没有专门的入栈和出栈指令，ARM 中的栈操作其实就是通过上面所讲的
STM/LDM 指令和栈指针 SP 配合操作完成的。栈一般可以分为以下 4 类：</p>
<ul>
<li>递增栈 A：入栈时，SP 栈指针从低地址往高地址方向增长。</li>
<li>递减栈 D：入栈时，SP 栈指针从高地址往低地址方向增长。</li>
<li>满栈 F：SP 栈指针总是指向栈顶元素。</li>
<li>空栈 E：SP 栈指针总是指向栈顶元素的下一个空闲存储单元。</li>
</ul>
<p>ARM 默认使用满递减堆栈，通过 STMFD/LDMFD
指令配对使用，完成堆栈的入栈和出栈操作。</p>
<p>ARM 中的 PUSH 和 POP 指令其实就是 LDM/STM 的同义词，是 LDMFD 和 STMFD
组合指令的助记符。</p>
<p>PUSH 指令和 POP 指令的使用示例如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/1f106995-cf0d-46bf-999a-c5ccd62a135d"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="相对寻址">相对寻址</h3>
<p>相对寻址其实也属于基址寻址，只不过它是基址寻址的一种特殊
情况。特殊在什么地方呢？它是以 PC
指针作为基地址进行寻址的，以指令中的地址差作为偏移，两者相加后得到的就是一个新地址，然后可以对这个地址进行读写操作。</p>
<p>ARM 中的 B、BL、ADR 指令其实都是采用相对寻址的。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/682acaa6-6c3b-40e5-b9c2-4c695eb0f3d2"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在上面的示例代码中，B LOOP 指令其实就等价于：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/6bb5563d-7e93-4cfa-a329-d08c6b51de46"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>除此之外，很多与位置无关的代码，如动态链接共享库，其在汇编代码层次的实现其实也是采用相对寻址的。程序中使用相对寻址访问的好处是不需要重定位，将代码加载到内存中的任何地址都可以直接运行。</p>
<h2 id="arm-伪指令">ARM 伪指令</h2>
<p>ARM 伪指令并不是 ARM
指令集中定义的标准指令，而是为了编程方便，各家编译器厂商自定义的一些辅助指令。</p>
<p>伪指令有点类似 C 语言中的预处理命令，在程序编译时，这些伪
指令会被翻译为一条或多条 ARM 标准指令。</p>
<p>常见的 ARM 伪指令主要有 4
个：ADR、ADRL、LDR、NOP，它们的使用示例如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/4a12f423-5440-4198-a6b1-5b1a9f978f31"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>NOP 伪指令比较简单，其实就相当于 MOV R0，R0。</p>
<p>在以后的学习和工作中，大家在 ARM 汇编程序中经常看到的就是 LDR
伪指令。</p>
<h3 id="ldr-伪指令">LDR 伪指令</h3>
<p>LDR 伪指令通常会让很多朋友感到迷惑，容易和加载指令 LDR 混淆。</p>
<p>LDR 伪指令的主要用途是将一个 32 位的内存地址保存到寄存器中。</p>
<p>在寄存器之间传递数据可以使用 MOV 指令，但是当传递的一个内存地址是 32
位的立即数时，MOV 指令就应付不了了，如下面的第 2 条指令。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/a8d5ce2d-05b6-4136-8cce-a66f082ad0e6"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>当我们往寄存器传递的地址是一个 32 位的常数时，为什么不能使用
MOV，而要使用 LDR 伪指令呢？这还得从 ARM 指令的编码格式说起。</p>
<p>RISC 指令的特点是单周期指令，指令的长度一般都是固定的。在一个 32
位的系统中，一条指令通常是 32
位的，指令中包括操作码和操作数，如图3-5所示：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/8cf1c334-6199-4c1f-be9d-a97b7c49add8"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>指令中的操作码和操作数共享 3
2位的存储空间：一般前面的操作码要占据几个比特位，剩下来的留给操作数的编码空间就小
32 位了。</p>
<p>当编译器遇到 <code>MOV R0，＃0x30008000</code>
这条指令时，因为后面的操作数是 32
位，编译器就无法对这条指令进行编码了。为了解决这个难题，编译器提供了一个
LDR 伪指令来完成上面的功能。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/dbbce217-c541-488c-b905-d2d0e2030e43"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在上面的示例代码中，LDR 不是普通的 ARM
加载指令，而是一个伪指令。为了与 ARM 指令集中的加载指令 LDR
区别开来，<strong>LDR
伪指令中的操作数前一般会有一个等于号=</strong>，用来表示该指令是个伪指令。</p>
<p>通过 LDR 伪指令，编译器就解决了向一个寄存器传送 32
位的立即数时指令无法编码的难题。</p>
<p>因为伪指令并不是 ARM 指令集中定义的标准指令，所以 CPU
硬件译码电路并不支持直接运行这些伪指令。</p>
<p>在程序编译期间，这些伪指令会被标准的 ARM 指令替代。</p>
<p>编译器在处理伪指令时，根据伪指令中的操作数大小，会使用不同的 ARM
标准指令替代。</p>
<p>如当 LDR 伪指令中的操作数小于 8 位时，LDR 伪指令一般会被 MOV
指令替代。下面的两行汇编指令其实是等价的：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/076072b8-7b10-421c-8d29-9da2ad9c1d0f"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>当 LDR 伪指令中的操作数大于 8 位时，LDR 指令会被编译器转换为
<code>LDR 标准指令+文字池</code> 的形式。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/f6505634-6ec4-41cf-92c7-1906d46ac9fc"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在上面的示例代码中，当 LDR 伪指令中的操作数为一个 32
位的立即数时，编译器会首先在内存中分配一个 4
字节大小的存储单元，然后将这个 32 位的地址 0x30008000
存放到该存储单元中，该存储单元通常也 叫作文字池（literal pool）。</p>
<p>接着编译器计算出该存储单元到 LDR 伪指令之间的偏移
OFFSET，然后使用寄存器相对寻址，就可以将这个 32 位的立即数送到 R0
寄存器中。偏移量 OFFSET 的大小一般要小于
4KB，所以在分析汇编代码时你会看到，存放这些 32
位地址常量的文字池一般紧挨着当前指令的代码段，直接放置在当前代码段的后面。</p>
<h3 id="adr-伪指令">ADR 伪指令</h3>
<p>ADR 伪指令的功能与 LDR 伪指令类似，将基于 PC
相对偏移的地址值读取到寄存器中。</p>
<p>ADR
为小范围的地址读取伪指令，底层使用相对寻址来实现，因此可以做到代码与位置无关。</p>
<p>ADR 伪指令的使用示例代码如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/10a60acb-927d-41fb-85c2-c17e30cf5143"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在上面的示例代码中，ADR 伪指令的作用是将标号 LOOP
表征的内存地址送到寄存器 R0 中。</p>
<p>编译器在编译 ADR 伪指令时，会首先计算出当前正在执行的 ADR
伪指令地址与标号 LOOP 之间的地址偏移 OFFSET，然后使用 ARM
指令集中的一条标准指令代替之，如使用 ADD 指令将标号表征的地址送到寄存器
R0 中。</p>
<h2 id="arm-汇编程序设计">ARM 汇编程序设计</h2>
<h3 id="arm-汇编程序格式">ARM 汇编程序格式</h3>
<p>ARM 汇编程序是以段（section）为单位进行组织的。</p>
<p>在一个汇编文件中，可以有不同的
section，分为代码段、数据段等，各个段之间相互独立，一个 ARM
汇编程序至少要有一个代码段。</p>
<p>我们可以使用 AREA 伪操作来标识一个段的起始、段名和段的读写属性。</p>
<p>我们使用分号；来注释代码。</p>
<h3 id="符号与标号">符号与标号</h3>
<p>在 ARM
汇编程序中，我们可以使用符号来标识一个地址、变量或数字常量。</p>
<p>当用符号来标识一个地址时，这个符号通常又被称为标号。</p>
<p>符号的命名规则和 C
语言的标识符命名规则一样：由字母、数字和下画线组成，符号的开头不能使用数字，但标号除外。标号比较任性，标号的开头不仅可以是数字，甚至整个标号可以是一个纯数字。</p>
<p>符号的命名在其作用域内必须唯一，不能与系统内部或系统预定义的符号同名，不能与指令助记符、伪指令同名。</p>
<p>有时候我们会直接通过数字 [0，99]
而不是使用字符来进行地址引用，我们称这种数字为局部标号。局部标号的作用域为当前段，在汇编程序中，我们可以使用下面的格式来引用局部标号。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/07151451-7548-407c-8645-5ce2ee7b0321"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在局部标号的引用格式中，由大括号 <code>&#123;&#125;</code>
括起来的部分是可选项，N 表示局部标号，其余的参数说明如下。</p>
<ul>
<li>%：引用符号，对一个局部标号产生引用。</li>
<li>F：指示编译器只向前搜索。</li>
<li>B：指示编译器只向后搜索。</li>
<li>A：指示编译器搜索宏的所有宏命令层。</li>
<li>T：指示编译器搜索宏的当前层。</li>
<li>N：局部标号的名字。</li>
<li>routename：局部标号作用范围名称，使用 ROUT 定义。</li>
</ul>
<p>若 B、F 没有指定，编译器将默认先向后搜索，然后向前搜索。若 A、T
都没指定，则汇编程序默认搜索从当前层到最顶层的所有宏命令，但不搜索较低层的宏命令。如果在标签中或者对一个标签的引用中指定了
routename，则汇编程序将其与最近的一个前 ROUT
指令的名称进行比较，如果不匹配，则汇编程序会生成一条错误消息，汇编失败。</p>
<p>在汇编代码中，使用局部标号的示例程序如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/7b12ddc0-45c4-4f7d-899e-b8bcf8458b8d"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="伪操作">伪操作</h3>
<p>在 C 语言中，为了编程方便，编译器会定义一系列预处理命令，并用 #
来标识，如 #include、#define、#if、#else、#end 等。</p>
<p>在汇编语言中，为了编程方便，汇编器也定义了一些特殊的指令助记符，以方便对汇编程序做各种处理。如使用
AREA 来定义一个段（section），使用 GBLA 来定义一个数据，使用 ENTRY
来指定汇编程序的执行入口等，这些指令助记符统称为伪指令或伪操作。</p>
<p>伪操作一般用在符号定义、数据定义、汇编程序结构控制等场合。在一个汇编程序中经常使用的伪操作如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/58ee7a2b-2622-4872-881f-86526cec3feb"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>关于数据定义，常用的伪操作有
DCD、DCB、SPACE、DATA，这些伪操作的使用方法如下所示。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/31f36818-6281-4977-b2bf-b3ccb8fd0b1f"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>除此之外，还有一些其他常用的伪操作，如用来标识程序的入口地址、程序的结束地址、用来定义段的属性等，具体如表3-4所示。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/012659fa-3f6b-4dad-a32b-7a2dd01b8030"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>有了这些伪操作辅助，我们就可以设计出更加灵活、功能更加复杂的程序结构，也可以定义一个个汇编子程序，然后在主程序中分别去调用它们，实现汇编语言的模块化编程。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/131643eb-cbfc-4dcc-a3a1-11a955b3005c"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>SUM_ASM 汇编子程序自身又调用了其他子程序 sum，这个 sum
子程序可以是一个汇编子程序，也可以是一个使用 C
语言定义的函数。在调用之前我们要先使用 IMPORT 伪操作把 sum
子程序导入进来，然后就可以直 接使用 BL
指令跳转过去运行了。只要遵循一些约定的规则，C
程序和汇编程序其实是可以相互调用的，从汇编指令的层面上看，它们之间并无本质的区别。</p>
<h2 id="c-语言和汇编语言混合编程">C 语言和汇编语言混合编程</h2>
<h3 id="atpcs-规则">ATPCS 规则</h3>
<p>ATPCS 的全称是 ARM-Thumb Procedure Call
Standard，其核心内容就是定义了 ARM
子程序调用的基本规则及堆栈的使用约定等。</p>
<p>ATPCS
最重要的内容是定义了子程序调用的具体规则，无论是程序员编写程序，还是编译器开发商开发编译器工具，一般都要遵守它。规则的主要内容如下：</p>
<ul>
<li>子程序间要通过寄存器 R0～R3（可记作a0～a3）传递参数，当参数个数大于
4 时，剩余的参数使用堆栈来传递。</li>
<li>子程序通过 R0～R1 返回结果。</li>
<li>子程序中使用 R4～R11（可记作 v1～v8）来保存局部变量。</li>
<li>R12 作为调用过程中的临时寄存器，一般用来保存函数的栈帧基址，记作
FP。</li>
<li>R13 作为堆栈指针寄存器，一般记作 SP。</li>
<li>R14 作为链接寄存器，用来保存函数调用者的返回地址，记作 LR。</li>
<li>R15 作为程序计数器，总是指向当前正在运行的指令，记作 PC。</li>
</ul>
<h3 id="在-c-程序中内嵌汇编代码">在 C 程序中内嵌汇编代码</h3>
<p>为了能在 C 程序中内嵌汇编代码，ARM 编译器在 ANSI C
标准的基础上扩展了一个关键字
<code>__asm</code>。通过这个关键字，我们就可以在 C 程序中内嵌 ARM
汇编代码。</p>
<p>在 C 程序中内嵌汇编代码的格式如下：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/8f570a61-88e5-4952-b79c-d82214b14038"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="在汇编程序中调用-c-程序">在汇编程序中调用 C 程序</h3>
<p>在 C 程序中可以内嵌汇编代码，在汇编程序中同样也可以调用 C 程序。</p>
<p>在调用的时候，我们要注意根据 ATPCS 规则来完成参数的传递，并配置好 C
程序传递参数和保存局部变量所依赖的堆栈环境，然后使用 BL
指令直接跳转即可。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/02259172-1ab3-47b0-978a-15adc003ba33"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h2 id="gnu-arm-汇编语言">GNU ARM 汇编语言</h2>
<p>在 ARM
平台下从事嵌入式软件开发，大家会遇到各种不同的集成开发环境和编译器，如
IAR、ADS1.2、RVDS、Keil MDK、RealView MDK、ARM 交叉编译器 arm-linux-gcc
等。</p>
<p>如果将这些不同的 IDE 归类，一般可以分为两大类：一类 IDE 内部集成了
ARM 编译器，另一类则使用开源的 GNU GCC for ARM
编译器，为了方便，在后续的文字中我们就简称为 GNU ARM 编译器。</p>
<p>一套完整的编译工具集主要包括以下几部分：</p>
<ul>
<li>编译器：用来将 C 源文件编译成汇编文件。</li>
<li>汇编器：用来将汇编文件汇编成目标文件。</li>
<li>链接器：用来将目标文件组装成可执行文件。</li>
<li>二进制转化工具：objdump、objcopy、strip 等。</li>
<li>库打包工具：ar.</li>
<li>调试工具：gdb、nm.</li>
<li>库/头文件：根据 C 语言标准定义的 API 实现的 C
标准库及对应的头文件。</li>
</ul>
<h3 id="gnu-arm-编译器的伪操作">GNU ARM 编译器的伪操作</h3>
<p>不同的 ARM 编译器之间的伪操作差别还是蛮大的。以 ARM 编译器和 GNU ARM
编译器为例，我们可以对比一下它们在数据定义、程序结构方面的差别，如表3-5所示。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/a7aa4969-e9d8-4f5e-a3ae-6fa5a4e59eb1"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在后面的内容中，我们会经常使用 ARM 反汇编代码来分析 C
语言的底层运行机制。为了能看懂反汇编代码，我们还需要熟悉一下在一个反汇编文件中经常看到的各种
GNU ARM 伪指令操作，如表3-6所示：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/aba59382-95c7-4fc0-954f-0fe6d326265d"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="gnu-arm-汇编语言中的标号">GNU ARM 汇编语言中的标号</h3>
<p>汇编语言中的符号定义规则，和 C
语言中标识符的定义规则类似：由字母、数字和下画线构成。</p>
<p>GNU ARM
编译器除了遵循标识符的一般规则，还有一些特殊的地方需要注意：GNU ARM
汇编语言中的标识符可以由字母、数字、下画线和“.”构成，局部标号可以由纯数字构成。</p>
<p>GNU 格式的局部标号由数字 N 组成，在引用时使用 Nf 或 Nb
的形式，分别表示向前搜索或向后搜索。除此之外，GNU ARM 汇编语言使用标号
<code>_start</code>
作为汇编程序的入口，如果你希望该标号被其他文件引用，只要在定义的地方使用
<code>.global</code> 伪操作声明一下就可以了。</p>
<h3 id="section-伪操作">section 伪操作</h3>
<p>在 GNU ARM 汇编语言中，用户可以使用 <code>.section</code>
伪操作自定义一个段，使用格式如下。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/3ac36ade-80c3-40a7-90d2-6e3c46fbdb33"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>在使用伪操作 <code>.section</code>
定义一个段时，每个段以段名开始，以下一个段名或文件结尾作为结束标记。</p>
<p>在定义段名时，注意不要和系统预留的段名冲突，如
<code>.text</code>、<code>.data</code>、<code>.bss</code>、<code>.rodata</code>
都是编译器系统预留的段名，分别表示代码段、数据段、BSS
段、只读数据段。我们可以通过readelf命令来查看系统预留的段名。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/e183e122-8678-49f8-8b72-a028d05dea23"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="基本数据格式">基本数据格式</h3>
<p>二进制数据通常以 0B 或 0b 开头，八进制数据以 0 开头，十六进制数据以
0x 开头，十进制数据则以非 0 数字开头。负数前面加 “-”，取补
用“～”，不相等用“&lt;&gt;”，其他运算符号如
+、-、*、%、&lt;、&lt;&lt;、&gt;、&gt;&gt;、|、&amp;、^、！、==、&gt;=、&amp;&amp;
与 C 语言语法相似。</p>
<p>字符串常量要用双引号 <code>""</code> 括起来。使用 <code>.ascii</code>
定义字符串时要自行在结尾加 <code>'\0'</code>，<code>.string</code>
伪操作可以定义多个字符串，使用 <code>.asciz</code> 伪操作可以定义一个以
<code>NULL</code> 字符结尾的字符串，使用 <code>.rept</code>
伪操作可以重复定义数据。</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/2eeeef5f-5a09-42ea-aa04-19ef4adbc8c9"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<h3 id="数据定义">数据定义</h3>
<p>在 GNU ARM
汇编程序中，如果我们想定义一个浮点数，那么可以使用下面的伪操作来定义：</p>
<figure>
<img data-src="https://github.com/XinranSix/Computer-Graphics/assets/62458905/5043e05e-22cd-46bd-9437-2260e8eb59c7"
alt="image" />
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>我们可以使用 <code>.float</code> 伪操作定义一个浮点数
f，并初始化为3.14。如果你想将这个浮点数重新赋值为3.1415，则可以通过
<code>.equ</code> 伪操作来完成。</p>
<p><code>.equ</code>
伪操作除了给数据赋值，还可以把常量定义在代码段中，然后在代码中直接引用。这一点有点类似
C 语言中的 <code>#define</code> 宏定义。</p>
<figure>
<img data-src="/image/illustrations/0ba8b357a0694ce59173d2d7dcd455b3.jpg"
alt="alt text" />
<figcaption aria-hidden="true">alt text</figcaption>
</figure>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><span
class="math inline">\(\displaystyle \int k \mathrm{d} x = kx +
C\)</span></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle \int x^{\alpha} \mathrm{d}
x=\frac{x^{\alpha+1}}{\alpha+1}+C(\alpha \neq -1)\)</span></td>
<td><span class="math inline">\(\displaystyle \int \frac{\mathrm{d}
x}{x} = \ln \lvert x \rvert + C\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \frac{\mathrm{d} x}{1 + x^{2}} =
\arctan x + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \frac{\mathrm{d}
x}{\sqrt{1 - x^{2}}} = \arcsin x + C\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \cos x \mathrm{d} x = \sin x
+C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \sin x \mathrm{d} x =
-\cos x + C\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \frac{\mathrm{d} x}{\cos^{2} x}
= \int {\sec}^{2} x \mathrm{d} x = \tan x + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \frac{\mathrm{d}
x}{\sin^{2} x} = \int {\csc}^{2} \mathrm{d} x = -\cot x +
C\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \sec x \tan x \mathrm{d} x =
\sec x + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \csc x \cot x
\mathrm{d} x = -\csc x + C\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \mathrm{e}^{x} \mathrm{d} x =
\mathrm{e}^{x} + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int a^{x} = \frac{a^x}{\ln
a} + C\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \mathrm{sh} x \mathrm{d} x =
\int \mathrm{ch} x + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \mathrm{ch} x
\mathrm{d} x = \mathrm{sh} x + C\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int\tan x \mathrm{d} x = -\lvert
\cos x \rvert + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \cot x \mathrm{d} x =
\ln \lvert \sin x \rvert + C\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \sec x \mathrm{d} x = \ln \lvert
\sec x + \tan x \rvert + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \csc \mathrm{d} x =
\ln \lvert \csc x - \cot x \rvert + C\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \frac{\mathrm{d} x}{a^{2} +
x^{2}} = \frac{1}{a} \arctan \frac{x}{a} + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \frac{\mathrm{d}
x}{a^{2} - x^{2}} = \arcsin \frac{x}{a} + C\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span
class="math inline">\(\displaystyle\int \frac{\mathrm{d} x}{\sqrt{x^2 +
a^2}} = \ln{(x + \sqrt{x^{2} + a^{2}})} + C\)</span></td>
<td><span class="math inline">\(\displaystyle\int \frac{\mathrm{d}
x}{\sqrt{x^{2}-a^{2}}} = \ln \lvert x+ \sqrt{x^{2}-a^{2}} \rvert +
C\)</span></td>
</tr>
</tbody>
</table>
<p>1235</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Yao J
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://xinransix.github.io/2023/07/24/ARM%E6%B1%87%E7%BC%96/" title="ARM 汇编">https://xinransix.github.io/2023/07/24/ARM汇编/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://github.com/XinranSix/archives/assets/62458905/6a6f2373-fbf5-4367-9ac2-65230cba90a2">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/ARM/" rel="tag"><i class="fa fa-tag"></i> ARM</a>
              <a href="/tags/%E6%B1%87%E7%BC%96/" rel="tag"><i class="fa fa-tag"></i> 汇编</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/07/17/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" rel="prev" title="Linux基础命令">
                  <i class="fa fa-angle-left"></i> Linux基础命令
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/08/07/CPP%E6%A8%A1%E6%9D%BF%E5%85%83%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/" rel="next" title="C++ 模板元编程基础">
                  C++ 模板元编程基础 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-waline">waline</a></li>
            <li class="tab"><a href="#comment-gitalk">gitalk</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane waline" id="comment-waline">
              <div class="comments" id="waline"></div>
            </div>
            <div class="tab-pane gitalk" id="comment-gitalk">
              <div class="comments gitalk-container"></div>
            </div>
        </div>
      </div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2023 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Yao J</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">109k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">6:37</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div><link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.0/lib/sakana.min.css"
/>
<div id="sakana-widget" style="position: fixed; bottom: 10px; right: 20px; z-index: 999;"></div>
<script>
  function initSakanaWidget() {
    new SakanaWidget().mount('#sakana-widget');
  }
</script>
<script
  async
  onload="initSakanaWidget()"
  src="https://cdn.jsdelivr.net/npm/sakana-widget@2.7.0/lib/sakana.min.js"
></script>


    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.umd.js" integrity="sha256-+2+qOqR8CKoHh/AsVR9k2qaDBKWjYNC2nozhYmv5j9k=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://xinransix.github.io/2023/07/24/ARM%E6%B1%87%E7%BC%96/"}</script>
  <script src="/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://comment-for-blog-psi.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v3/dist/waline.css","commentCount":true,"pageview":true,"emoji":["https://unpkg.com/@waline/emojis@1.1.0/alus","https://unpkg.com/@waline/emojis@1.1.0/bilibili","https://unpkg.com/@waline/emojis@1.1.0/bmoji","https://unpkg.com/@waline/emojis@1.1.0/qq","https://unpkg.com/@waline/emojis@1.1.0/tieba","https://unpkg.com/@waline/emojis@1.1.0/weibo","https://unpkg.com/@waline/emojis@1.1.0/tw-emoji","https://unpkg.com/@waline/emojis@1.1.0/tw-body","https://unpkg.com/@waline/emojis@1.1.0/tw-food","https://unpkg.com/@waline/emojis@1.1.0/tw-natural","https://unpkg.com/@waline/emojis@1.1.0/tw-object","https://unpkg.com/@waline/emojis@1.1.0/tw-symbol","https://unpkg.com/@waline/emojis@1.1.0/tw-people","https://unpkg.com/@waline/emojis@1.1.0/tw-sport","https://unpkg.com/@waline/emojis@1.1.0/tw-time","https://unpkg.com/@waline/emojis@1.1.0/tw-travel","https://unpkg.com/@waline/emojis@1.1.0/tw-weather","https://unpkg.com/@waline/emojis@1.1.0/tw-flag"],"el":"#waline","comment":true,"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","path":"/2023/07/24/ARM%E6%B1%87%E7%BC%96/"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"XinranSix","repo":"comment","client_id":"9c03a2ae7f09aea822ba","client_secret":"d1c9ff2bb92b84493b307f1587585a6b12fc78b8","admin_user":"XinranSix","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"732ff67204ff6916a8766b704239f157"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
